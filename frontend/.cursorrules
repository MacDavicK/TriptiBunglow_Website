# Frontend Cursor Rules — React + Vite + TypeScript + Tailwind

## Tech Stack
- React 18 with functional components and hooks only
- Vite 6 as build tool
- TypeScript 5.7+ in strict mode
- Tailwind CSS 3 for all styling (no CSS modules, no styled-components)
- React Router v7 for routing
- TanStack React Query v5 for server state
- React Hook Form + Zod for form handling and validation
- date-fns for date formatting (IST display)
- Axios for API calls (shared instance with interceptors)

## Directory Structure
```
frontend/src/
├── components/
│   ├── ui/           # Reusable primitives: Button, Input, Card, Modal, Badge, Spinner
│   ├── layout/       # Header, Footer, Sidebar, PageContainer
│   ├── booking/      # PropertyCard, DatePicker, BookingForm, BookingSummary, PaymentModal
│   └── admin/        # BookingsTable, DashboardStats, ApprovalCard, DamageReportForm
├── pages/
│   ├── HomePage.tsx
│   ├── PropertyPage.tsx
│   ├── BookingPage.tsx
│   ├── BookingConfirmationPage.tsx
│   ├── PrivacyPolicyPage.tsx
│   ├── admin/
│   │   ├── LoginPage.tsx
│   │   ├── DashboardPage.tsx
│   │   ├── BookingsPage.tsx
│   │   ├── BookingDetailPage.tsx
│   │   └── BlockedDatesPage.tsx
├── hooks/
│   ├── useAuth.ts            # Admin JWT auth context
│   ├── useAvailability.ts    # React Query: fetch available dates
│   ├── useBooking.ts         # React Query: create/fetch bookings
│   └── useRazorpay.ts        # Load Razorpay script, handle checkout
├── services/
│   ├── api.ts                # Axios instance, interceptors, base URL
│   ├── booking.api.ts        # Booking endpoints
│   ├── payment.api.ts        # Payment endpoints
│   ├── property.api.ts       # Property endpoints
│   └── admin.api.ts          # Admin endpoints
├── contexts/
│   └── AuthContext.tsx        # Admin auth provider (access token in memory)
├── utils/
│   ├── format-currency.ts    # Paise → ₹25,000 display
│   ├── format-date.ts        # UTC → IST formatted display
│   └── constants.ts          # API base URL, property slugs
├── types/                    # Re-export from /shared/types + frontend-only types
├── App.tsx
├── main.tsx
└── index.css                 # Tailwind directives only
```

## Component Rules
- Every component in its own file. One component per file.
- Props interface defined above the component: `interface PropertyCardProps { ... }`
- Use `cn()` utility (clsx + tailwind-merge) for conditional classes
- All interactive elements must have proper `aria-*` labels
- Mobile-first responsive design: default styles = mobile, `md:` = tablet, `lg:` = desktop
- Loading states: use Skeleton components, never bare "Loading..." text
- Error states: use a reusable ErrorBanner component with retry button

## Tailwind Conventions
- Color palette: Use Tailwind defaults. Primary = indigo-600, Success = emerald-600, Danger = red-600, Warning = amber-500
- Spacing: Use Tailwind scale (p-4, m-6, gap-4). No arbitrary values unless unavoidable.
- Typography: text-sm body, text-base for emphasis, text-2xl/3xl for headings
- Breakpoints: sm (640px), md (768px), lg (1024px), xl (1280px)
- Dark mode: NOT in MVP scope. Do not add dark: variants.

## API Integration
- Base URL from env: `VITE_API_BASE_URL`
- Axios instance with `withCredentials: true` for refresh token cookies
- Access token stored in memory (React state), NOT localStorage
- 401 interceptor: attempt token refresh, retry original request, redirect to login on failure
- React Query: `staleTime: 5 * 60 * 1000` (5 min) for properties, `staleTime: 30 * 1000` for availability

## Razorpay Integration
- Load Razorpay script dynamically: `https://checkout.razorpay.com/v1/checkout.js`
- Only `key_id` is exposed to frontend (from `VITE_RAZORPAY_KEY_ID`)
- On payment success: POST to `/api/payments/verify` with `{ razorpay_order_id, razorpay_payment_id, razorpay_signature }`
- On payment failure: Show error toast, allow retry

## Currency Display
```typescript
// Always use this pattern:
export const formatCurrency = (paise: number): string => {
  return new Intl.NumberFormat('en-IN', {
    style: 'currency',
    currency: 'INR',
    maximumFractionDigits: 0,
  }).format(paise / 100);
};
// formatCurrency(2500000) → "₹25,000"
```

## Date Display
```typescript
// Always convert UTC to IST for display:
import { format, utcToZonedTime } from 'date-fns-tz';
const IST = 'Asia/Kolkata';
export const formatDateIST = (utcDate: string | Date): string => {
  return format(utcToZonedTime(new Date(utcDate), IST), 'dd MMM yyyy', { timeZone: IST });
};
```

## Do NOT
- No `any` types. Use `unknown` + type narrowing.
- No inline styles. Tailwind only.
- No `console.log` in committed code. Use a dev-only logger utility.
- No localStorage for auth tokens. Memory only.
- No hardcoded API URLs. Always use VITE_API_BASE_URL.
- No default exports.
